<h1><?php echo $this->video->getTitle();?></h1>
<p>
    <video id="video" controls src="<?php echo $this->video->getFilename();?>">
    </video>
    
</p>
<h3>Actions:</h3>
<?php
	if ($this->video->isMine()):
?>
<a href="/video/delete/id/<?php echo $this->video->getVideoId();?>">Delete this video</a>
<?php endif;?>
<p><h3>
	<a class="ajax" href="/video/vote/id/<?php echo $this->video->getVideoId();?>/vote/up">Vote Up</a> | 
	<a class="ajax" href="/video/vote/id/<?php echo $this->video->getVideoId();?>/vote/down">Vote Down</a>
</h3></p>
<h2>Comments:</h2>
<?php if(Chaplin_Auth::getInstance()->hasIdentity()): echo $this->formComment; else: 
echo 'Login above to comment.'; endif;  ?>
<dl>
    <?php foreach($this->video->getComments() as $modelComment):?>
    <dt><?php echo $modelComment->getUsername();?></dt>
    <dd><?php echo $modelComment->getComment();?></dd>
    <?php endforeach; ?>
</dl>
<script>
(function() {

var elem = document.getElementById("video");
elem.addEventListener('dblclick', function() {    
    if (elem.requestFullScreen) {
      elem.requestFullScreen();
    } else if (elem.mozRequestFullScreen) {
      elem.mozRequestFullScreen();
    } else if (elem.webkitRequestFullScreen) {
      elem.webkitRequestFullScreen();
    }
});
elem.addEventListener('click', function() {
    if(this.paused) {
        this.play();
    } else {
        this.pause();
    }
});

})();
</script>
